# SignalSpot Backend Environment Variables
# Copy this file to .env and update with your actual values
# NEVER commit the actual .env file to version control

# ====================
# Node Environment
# ====================
NODE_ENV=production
PORT=3000
API_PREFIX=api
TZ=Asia/Seoul

# ====================
# Database Configuration
# ====================
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=signalspot_user
DB_PASSWORD=CHANGE_THIS_STRONG_PASSWORD_MIN_32_CHARS
DB_NAME=signalspot_db
DB_SSL=true
DB_POOL_MIN=2
DB_POOL_MAX=10

# ====================
# Redis Configuration
# ====================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD
REDIS_DB=0
# Alternative: Use Redis URL
# REDIS_URL=redis://username:password@localhost:6379/0

# ====================
# JWT Configuration
# ====================
JWT_SECRET=CHANGE_THIS_USE_OPENSSL_RAND_BASE64_32_FOR_GENERATION
JWT_REFRESH_SECRET=CHANGE_THIS_USE_DIFFERENT_SECRET_FROM_ABOVE
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# ====================
# Security Configuration
# ====================
BCRYPT_SALT_ROUNDS=12
ENCRYPTION_KEY=CHANGE_THIS_32_CHARACTER_ENCRYPTION_KEY_HERE
HMAC_SECRET=CHANGE_THIS_HMAC_SECRET_FOR_SIGNATURES
SESSION_SECRET=CHANGE_THIS_SESSION_SECRET_MIN_32_CHARS

# ====================
# CORS Configuration
# ====================
FRONTEND_URL=https://app.signalspot.com
ALLOWED_ORIGINS=https://app.signalspot.com,https://admin.signalspot.com
CORS_CREDENTIALS=true

# ====================
# File Upload Configuration
# ====================
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760
ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/webp,image/gif
AWS_ACCESS_KEY_ID=CHANGE_THIS_TO_YOUR_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=CHANGE_THIS_TO_YOUR_AWS_SECRET_KEY
AWS_REGION=ap-northeast-2
AWS_S3_BUCKET=CHANGE_THIS_TO_YOUR_BUCKET_NAME
AWS_S3_IMAGE_FOLDER=signalspot/

# ====================
# Firebase Configuration
# ====================
# Option 1: Use service account file path
FIREBASE_SERVICE_ACCOUNT_PATH=/path/to/firebase-service-account.json
FIREBASE_SERVICE_ACCOUNT_FILE=firebase-service-account.json

# Option 2: Use environment variable with JSON string
# FIREBASE_SERVICE_ACCOUNT='{"type":"service_account","project_id":"your-project","private_key":"-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n","client_email":"..."}'

# Firebase project settings
FIREBASE_PROJECT_ID=CHANGE_THIS_TO_YOUR_PROJECT_ID
ENABLE_PUSH_NOTIFICATIONS=true

# ====================
# External APIs
# ====================
GOOGLE_MAPS_API_KEY=CHANGE_THIS_TO_YOUR_API_KEY
WEATHER_API_KEY=CHANGE_THIS_TO_YOUR_WEATHER_API_KEY
GEOCODING_API_KEY=CHANGE_THIS_TO_YOUR_GEOCODING_API_KEY

# ====================
# Email Configuration
# ====================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=noreply@signalspot.com
SMTP_PASS=CHANGE_THIS_TO_APP_SPECIFIC_PASSWORD

# ====================
# SMS Configuration
# ====================
TWILIO_ACCOUNT_SID=CHANGE_THIS_TO_YOUR_TWILIO_SID
TWILIO_AUTH_TOKEN=CHANGE_THIS_TO_YOUR_TWILIO_TOKEN
TWILIO_PHONE_NUMBER=+1234567890

# ====================
# Monitoring & Logging
# ====================
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_PATH=./logs/app.log
ENABLE_METRICS=true
METRICS_PORT=9090

# ====================
# OpenTelemetry
# ====================
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
OTEL_SERVICE_NAME=signalspot-backend

# ====================
# Rate Limiting
# ====================
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100
RATE_LIMIT_SKIP_IF_LOGGED_IN=false

# ====================
# Cache TTL Settings (seconds)
# ====================
CACHE_TTL_SHORT=60
CACHE_TTL_MEDIUM=300
CACHE_TTL_LONG=3600
CACHE_TTL_VERY_LONG=86400

# ====================
# Feature Flags
# ====================
ENABLE_WEBSOCKET=true
ENABLE_PUSH_NOTIFICATIONS=true
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_SMS_NOTIFICATIONS=false
ENABLE_HEALTH_CHECK=true

# ====================
# Application Settings
# ====================
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100
DEFAULT_SEARCH_RADIUS=1000
MAX_SEARCH_RADIUS=50000
SPARK_EXPIRY_HOURS=72
SPARK_MAX_DISTANCE_METERS=100
SPOT_DEFAULT_EXPIRY_HOURS=24
SPOT_MAX_EXPIRY_HOURS=168
SPOT_DEFAULT_RADIUS_METERS=100
SPOT_MAX_RADIUS_METERS=5000
